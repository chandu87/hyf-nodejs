{"version":3,"sources":["../src/ContactList.js"],"names":["writeFile","util","promisify","fs","readFile","Contact","constructor","obj","name","age","id","addPhone","number","phoneNumber","call","console","log","birthday","ContactList","filename","list","load","addContact","contact","push","save","findIndex","contactId","ids","map","item","indexOf","updateContact","updateId","deleteContact","deleteId","splice","path","resolve","__dirname","JSON","stringify","then","readFilePromise","fileString","parse","contactObj","Promise"],"mappings":"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","file":"ContactList.js","sourcesContent":["import fs from \"fs\";\nimport util from \"util\";\nimport path from \"path\";\n\nconst writeFile = util.promisify(fs.writeFile);\nconst readFile = util.promisify(fs.readFile);\n\nexport class Contact {\n  constructor(obj) {\n    this.name = obj.name;\n    this.age = obj.age;\n    this.id = obj.id;\n  }\n\n  addPhone(number) {\n    return (this.phoneNumber = number);\n  }\n  call() {\n    if (this.phoneNumber)\n      console.log(\"Calling \" + this.name + \" at \" + this.phoneNumber);\n    else console.log(this.name + \" has no phone number saved.\");\n  }\n  birthday() {\n    console.log(\n      \"Wishing \" + this.name + \" a happy \" + (this.age + 1) + \"th birthday!\"\n    );\n  }\n}\n\nexport class ContactList {\n  constructor(filename) {\n    this.list = [];\n    this.filename = filename;\n    this.load();\n  }\n\n  addContact(contact) {\n    if (contact instanceof Contact) {\n      this.list.push(contact);\n      console.log(\"this.list\", this.list);\n      return this.save(this.list);\n    }\n  }\n  findIndex(contactId) {\n    const ids = this.list.map(item => {\n      return item.id;\n    });\n    console.log(ids);\n    return ids.indexOf(contactId);\n  }\n  updateContact(contactId) {\n    console.log(\"------- List before update\");\n    console.log(this.list);\n    const updateId = this.findIndex(contactId);\n    if (updateId !== -1) {\n      this.list[updateId].age = \"27\";\n      console.log(\"------- List after update -----------\");\n\t  console.log(this.list);\n\t  this.save(this.list)\n\t  return this.list;\n\n    } else {\n\t  console.log(\"Item with ID not found\");\n\t  return \"Item with ID not found\";\n    }\n  }\n  deleteContact(contactId) {\n    //\t\tconsole.log(contactId);\n    console.log(\"------- List before Delete\");\n    const deleteId = this.findIndex(contactId);\n    console.log(deleteId);\n    if (deleteId !== -1) {\n      this.list.splice(deleteId, 1);\n      console.log(\"------- List after delete -----------\");\n\t  console.log(this.list);\n\t  this.save(this.list);\n\t  return this.list;\n    } else {\n\t  console.log(\"Item with ID not found\");\n\t  return \"Item with ID not found\";\n\t}\n  }\n\n  save(list) {\n    return writeFile(\n      path.resolve(__dirname, this.filename),\n      JSON.stringify(list),\n      \"utf8\"\n    ).then(() => {\n      return list;\n    });\n  }\n\n  load() {\n    const readFilePromise = readFile(\n      path.resolve(__dirname, this.filename),\n      \"utf8\"\n    );\n\n    return readFilePromise.then(fileString => {\n      this.list = JSON.parse(fileString).map(\n        contactObj => new Contact(contactObj)\n      );\n\n      return Promise.resolve(null);\n    });\n    // return new Promise((resolve, reject) => {\n    // \treadFilePromise\n    // \t.then(fileString => {\n    // \t\tthis.list = JSON.parse(fileString)\n    // \t\t.map(contactObj => new Contact(contactObj));\n\n    // \t\tresolve(null);\n    // \t});\n    // });\n  }\n}\n"]}